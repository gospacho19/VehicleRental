<UserControl 
    x:Class="LuxuryCarRental.Views.VehicleDetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:LuxuryCarRental.ViewModels"
    mc:Ignorable="d"
    d:DesignHeight="600"
    d:DesignWidth="800"
    Background="{StaticResource LightBackgroundBrush}">

    <Grid Margin="{StaticResource ContentPadding}">
        <Grid.RowDefinitions>
            <!-- 1) Page Title -->
            <RowDefinition Height="Auto"/>

            <!-- 2) CardPanel with Image + Details + Buttons -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 1) Page Title -->
        <TextBlock
            Grid.Row="0"
            Text="Vehicle Details"
            Style="{StaticResource SectionTitleText}"
            Margin="0,0,0,12" />

        <!-- 2) CardPanel Container -->
        <Border
            Grid.Row="1"
            Style="{StaticResource CardPanel}"
            Background="{StaticResource CardBackgroundBrush}"
            CornerRadius="8"
            Padding="16">

            <Grid>
                <Grid.RowDefinitions>
                    <!-- 2A) Header: Image + Name -->
                    <RowDefinition Height="Auto"/>

                    <!-- 2B) Details (scrollable) -->
                    <RowDefinition Height="*"/>

                    <!-- 2C) Buttons -->
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 2A) Vehicle Image & Name -->
                <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,16">
                    <Border BorderBrush="{StaticResource BorderBrushColor}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="4">
                        <Image
                            Source="{Binding Vehicle.ImageSource}"
                            Width="200"
                            Height="120"
                            Stretch="UniformToFill" />
                    </Border>

                    <TextBlock
                        Text="{Binding Vehicle.Name}"
                        FontSize="24"
                        FontWeight="Bold"
                        Margin="16,0,0,0"
                        VerticalAlignment="Center"
                        Foreground="{StaticResource PrimaryBrush}" />
                </StackPanel>

                <!-- 2B) Common + Type‐Specific Fields -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <StackPanel>

                        <!-- 2B.1) General Information -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock
                                Text="General Information"
                                Style="{StaticResource SectionTitleText}"
                                Margin="0,0,0,8" />

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Type:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.VehicleType}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Daily Rate:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.DailyRate, StringFormat=C}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>
                        </StackPanel>

                        <!-- 2B.2) Car & LuxuryCar Fields -->
                        <StackPanel Margin="0,0,0,16">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <!-- Show if VehicleType == Car -->
                                        <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Car">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                        <!-- Show if VehicleType == LuxuryCar -->
                                        <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="LuxuryCar">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>

                            <TextBlock
                                Text="Car Details"
                                Style="{StaticResource SectionTitleText}"
                                Margin="0,0,0,8" />

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Make:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.Make}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Model:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.Model}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Year:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.Year}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>
                        </StackPanel>

                        <!-- 2B.3) LuxuryCar Only -->
                        <StackPanel Margin="0,0,0,16">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="LuxuryCar">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>

                            <TextBlock
                                Text="Luxury Car Extras"
                                Style="{StaticResource SectionTitleText}"
                                Margin="0,0,0,8" />

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Security Deposit:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.SecurityDeposit, StringFormat=C}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Includes Chauffeur:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.IncludesChauffeur}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Optional Features:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.OptionalFeatures}"
                                    Style="{StaticResource ValueText}"
                                    TextWrapping="Wrap"
                                    Width="400" />
                            </StackPanel>
                        </StackPanel>

                        <!-- 2B.4) Motorcycle Only -->
                        <StackPanel Margin="0,0,0,16">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Motorcycle">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>

                            <TextBlock
                                Text="Motorcycle Details"
                                Style="{StaticResource SectionTitleText}"
                                Margin="0,0,0,8" />

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Engine Capacity (cc):"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.EngineCapacityCc}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Has Sidecar:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.HasSidecar}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>
                        </StackPanel>

                        <!-- 2B.5) Yacht Only -->
                        <StackPanel Margin="0,0,0,16">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Yacht">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>

                            <TextBlock
                                Text="Yacht Details"
                                Style="{StaticResource SectionTitleText}"
                                Margin="0,0,0,8" />

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Length (m):"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.LengthInMeters}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4">
                                <TextBlock
                                    Text="Cabin Count:"
                                    Style="{StaticResource LabelText}"
                                    Width="150" />
                                <TextBlock
                                    Text="{Binding Vehicle.CabinCount}"
                                    Style="{StaticResource ValueText}" />
                            </StackPanel>
                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>

                <!-- 2C) Action Buttons -->
                <StackPanel
                    Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Left"
                    Margin="0,12,0,0">

                    <Button
                        Content="Add to Cart"
                        Command="{Binding AddToCartCommand}"
                        Style="{StaticResource PrimaryButton}"
                        Padding="12,6"
                        Margin="0,0,12,0"/>

                    <Button
                        Content="Back"
                        Command="{Binding GoBackCommand}"
                        Style="{StaticResource SecondaryButton}"
                        Padding="12,6"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
