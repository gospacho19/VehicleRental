<UserControl 
    x:Class="LuxuryCarRental.Views.VehicleDetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:LuxuryCarRental.ViewModels"
    mc:Ignorable="d"
    d:DesignHeight="600"
    d:DesignWidth="800">

    <!-- We assume the DataContext is VehicleDetailViewModel, which has a public `Vehicle` property. -->
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header / Image -->
            <RowDefinition Height="*"/>
            <!-- Details scrollable -->
            <RowDefinition Height="Auto"/>
            <!-- Buttons (Add to Cart, Back) -->
        </Grid.RowDefinitions>

        <!-- ─── 1) Vehicle Image & Name ─── -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,16">
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="4">
                <Image 
                    Source="{Binding Vehicle.ImageSource}" 
                    Width="200" 
                    Height="120" 
                    Stretch="UniformToFill" />
            </Border>
            <TextBlock 
                Text="{Binding Vehicle.Name}" 
                FontSize="24" 
                FontWeight="Bold" 
                Margin="16,0,0,0"
                VerticalAlignment="Center" />
        </StackPanel>

        <!-- ─── 2) Common + Type‐Specific Fields ─── -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- 2.1) Common Fields (visible for every vehicle) -->
                <StackPanel Margin="0,0,0,12">
                    <TextBlock Text="General Information" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8" />

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Type:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.VehicleType}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Daily Rate:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.DailyRate, StringFormat=C}" />
                    </StackPanel>
                </StackPanel>

                <!-- 2.2) Car‐and‐LuxuryCar Fields -->
                <StackPanel Margin="0,0,0,12">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <!-- Show if VehicleType == Car -->
                                <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Car">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                                <!-- Show if VehicleType == LuxuryCar -->
                                <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="LuxuryCar">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <TextBlock Text="Car Details" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8" />

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Make:" FontWeight="Bold" Width="150"/>
                        <!-- Because Vehicle is typed as LuxuryCar or Car, we can bind Make directly -->
                        <TextBlock Text="{Binding Vehicle.Make}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Model:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.Model}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Year:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.Year}" />
                    </StackPanel>
                </StackPanel>

                <!-- 2.3) LuxuryCar‐Only Fields -->
                <StackPanel Margin="0,0,0,12">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="LuxuryCar">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <TextBlock Text="Luxury Car Extras" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8" />

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Security Deposit:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.SecurityDeposit, StringFormat=C}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Includes Chauffeur:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.IncludesChauffeur}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Optional Features:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.OptionalFeatures}" 
                                   TextWrapping="Wrap"
                                   Width="400" />
                    </StackPanel>
                </StackPanel>

                <!-- 2.4) Motorcycle‐Only Fields -->
                <StackPanel Margin="0,0,0,12">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Motorcycle">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <TextBlock Text="Motorcycle Details" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8" />

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Engine Capacity (cc):" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.EngineCapacityCc}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Has Sidecar:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.HasSidecar}" />
                    </StackPanel>
                </StackPanel>

                <!-- 2.5) Yacht‐Only Fields -->
                <StackPanel Margin="0,0,0,12">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Vehicle.VehicleType}" Value="Yacht">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    <TextBlock Text="Yacht Details" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8" />

                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Length (m):" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.LengthInMeters}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,4">
                        <TextBlock Text="Cabin Count:" FontWeight="Bold" Width="150"/>
                        <TextBlock Text="{Binding Vehicle.CabinCount}" />
                    </StackPanel>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- ─── 3) Buttons at the bottom ─── -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,12,0,0">
            <Button Content="Add to Cart" 
                    Command="{Binding AddToCartCommand}" 
                    Padding="12,6"
                    Margin="0,0,12,0"/>
            <Button Content="Back" 
                    Command="{Binding GoBackCommand}" 
                    Padding="12,6"/>
        </StackPanel>
    </Grid>
</UserControl>
