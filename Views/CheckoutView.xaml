<UserControl
    x:Class="LuxuryCarRental.Views.CheckoutView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    mc:Ignorable="d"
    d:DesignHeight="450"
    d:DesignWidth="800">

    <!-- NOTE: We do NOT set DataContext here. Instead, we’ll set it in code-behind via DI. -->

    <Grid Margin="16">
        <!-- Define four rows: 
             1) Date-pickers (Auto), 
             2) CartItems DataGrid (Auto),
             3) Total cost (Auto),
             4) Card fields + Pay button (Auto) 
        -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Date pickers + duration -->
            <RowDefinition Height="Auto" />
            <!-- CartItems grid -->
            <RowDefinition Height="Auto" />
            <!-- Total cost line -->
            <RowDefinition Height="Auto" />
            <!-- Card input + Pay button -->
        </Grid.RowDefinitions>

        <!-- 1) DATE PICKERS ROW -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Start Date:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <DatePicker
                SelectedDate="{Binding StartDate, Mode=TwoWay}"
                DisplayDateStart="{x:Static sys:DateTime.Today}"
                Width="120"/>

            <TextBlock Text="   End Date:" VerticalAlignment="Center" Margin="24,0,8,0"/>
            <DatePicker
                SelectedDate="{Binding EndDate, Mode=TwoWay}"
                DisplayDateStart="{Binding StartDate}"
                Width="120"/>

            <TextBlock Text="   Duration:" VerticalAlignment="Center" Margin="24,0,8,0"/>
            <TextBlock Text="{Binding DurationDays}" VerticalAlignment="Center"/>
            <TextBlock Text=" days" VerticalAlignment="Center" Margin="4,0,0,0"/>
        </StackPanel>

        <!-- 2) CART ITEMS DATA GRID -->
        <DataGrid
            Grid.Row="1"
            ItemsSource="{Binding CartItems}"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            IsReadOnly="True"
            Margin="0,0,0,16"
            Height="200">
            <DataGrid.Columns>
                <DataGridTextColumn
                    Header="Vehicle"
                    Binding="{Binding Vehicle.Make}"
                    Width="*" />
                <DataGridTextColumn
                    Header="Model"
                    Binding="{Binding Vehicle.Model}"
                    Width="*" />
                <DataGridTextColumn
                    Header="Rate/Day"
                    Binding="{Binding Vehicle.DailyRate.Amount, StringFormat=C}"
                    Width="Auto" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- 3) TOTAL COST LINE -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,16">
            <TextBlock Text="Total Cost: " FontWeight="Bold" VerticalAlignment="Center" />
            <TextBlock Text="{Binding TotalCost, StringFormat=C}" FontWeight="Bold" Margin="4,0,0,0" VerticalAlignment="Center" />
        </StackPanel>

        <!-- 4) CARD FIELDS + PAY BUTTON -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <!-- Instead of PlaceholderText, we use a preceding label or a tooltip. -->
            <TextBlock Text="Card #" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <TextBox
    Width="120"
    Text="{Binding CardNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    ToolTip="Enter card number"/>

            <TextBlock Text="  Expiry (MM/YY):" VerticalAlignment="Center" Margin="8,0,4,0"/>
            <TextBox
    Width="80"
    Text="{Binding Expiry, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    ToolTip="MM/YY" />

            <TextBlock Text="  CVV:" VerticalAlignment="Center" Margin="8,0,4,0"/>
            <TextBox
    Width="60"
    Text="{Binding Cvv, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    ToolTip="3- or 4-digit CVV" />

            <Button
                Content="Confirm &amp; Pay"
                Command="{Binding PayCommand}"
                Margin="12,0,0,0"
                Width="120"/>
        </StackPanel>
    </Grid>
</UserControl>
